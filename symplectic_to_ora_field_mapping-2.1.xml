<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    
    Symplectic -> ORA Data Model data mapping
    =========================================
    
    This set of mappings is written against the ORA Data Model 2.1.
    
    The first set of mappings is provided by a <symplectic_field_mappings/> element, which contains field-field relationships.
    
    The second set of mappings is provided by a sample Symplectic Pubs-Atom XML file within a <feed/> element with ORA field names in place of values.
    
    
    Changelog
    =========
    02/12/19:
    - Updated ocntributors_department to come frm user table G07, not Department field (see GitHub #124)
    20/11/19: 
    - Changed Hyrax Work Type to Hyrax Work Model (TW)
    - Remove mapping from author-url to ORA personal website as not the same.
    15/11/19: Added location conditional for dataset
    05/11/2019:
    - Removed version code that should have been deleted 21/10/2019
    - updated is-open-access to set to True
    04/11/2019: 
    - Updated publication status with new value mappings
    - Updated repository-status to use record_publication_date and record_review_status instead of public url.
    - update is-compliant-with-inst-policy to no mapping
    28/10/2019: Added 'No mapping' for altemetric-attention-score and field-citation-ration (following call with S Ltd 24/10)
    25/10/2019: Commented out oa-location-url and oa-location-file-version, as this means of deposit is not currently enabled in SE
    22/10/2019: Updated online-publication-date and publication-date (#85)
    21/10/2019: Updated version (#87)
    02/10/2019: Update mappings for SE:
    - finish-date (#86)
    - thesis-type (#93)
    - medium (#92)
    - location (part of #88)
    22/07/2019: Update ORA work type mappings to include Hyrax Model names
    16/07/2019: Datamodel 2.1 updates
    - added mapping for c-apc to apc_admin_apc_requested
    - publisher_url maps to publication_website_url not to publication_url
    - p-requested-embargo-period maps to file_embargo_period
    - added contextural mappings for physical items for publisher_name to manufacturer, publication_website_url to manufacturer_website_url, and citation_publication_date to production_date
    03/04/2019: Added deposit licence instructions
    27/03/2019: Added type of work mappings
    - Type of work mappings section added
    - Updated sub types mapping instructions
    - Updated confidential_report mapping instructions
    - removed outdated MODS mapping example
    - removed value and field mappings checklist: the only outstanding issues are being tracked in Gitlab issues
    25/03/2019: Added figshare mapping for sso/institutional identifier
    22/03/2019: Update following publication-publication example pubs 86457
    - publication-publication related item mappings added
    - author-licence maps to licence
    - external identifier mappings updated
    19/02/2019: Update following specific example markup pubs:97575
    - funding-acknowledgments grant-id mapped to funders__funder_grant__grant_identifier
    - publisher-licence to licence
    - keyword: subject added to potential mappings
    - sub-type-of-work
    15/02/2019: Update following specific example markup pubs:9598
    - Funder acknowldgement text
    - publisher_url points to publication_url not to publisher_website_url
    - full-name is not mapped
    - identifier_pubs_identifier
    - tinypid
    14/02/2019: Datamodel v2.0 conformance
    - Fields starting with 'identifiers_' now start with 'identifier_'
    13/02/2019 - Update following specific example markup pubs:83749
    - Contributor fields from 'People data feed'
    - Funder and grant fields
    - Deposit related fields
    - Open Access Monitoring fields
    - Implicit values
    
    Symplectic fields
    =================
    
    The Symplectic field is given first in a <symplectic_field name="" /> element. All mappings related to this field will be children of this element.
    
    If the field is a custom field in Oxford's Oxris Symplectic installation, then an <oxford_symplectic_field name="" number=""> 
    element is used. The number corresponds to the generic field number in the Symplectic installation.
    
    Where a Symplectic field contains child fields (e.g. funding-acknowledgements) these are contained within a 
    <symplectic_child_field/> element. This will have the same contents as a <symplectic_field/> element.
    
    
    ORA field mappings
    ==================
    
    A corresponding ORA field is given in a <ora_field /> child element to the Symplectic field.
    
    If a field needs to be mapped into two fields (or if it has a companion value), more than one <ora_field /> is given.
    
    Mandatory values are indicated by an equals sign, followed by the value.
    
    ORA field names are given in their extended form (see Ora Data Model to MODS document): parent/ancestor fields
    are indicated by a prefix to the field name followed by two double underscores, e.g. 'contributors__last_name'
    
    Where there is no corresponding ORA field, a <no_mapping/> element is used.
    
    Where a field in Symplectic can be inferred from a combination of ORA fields, a <computed/> element is used.
    
    Fields that require attention are marked with a <to_do /> element.
    
    
    Other elements
    ==============
    
    If a field can be mapped to more than one value, an <if test=""/> element is used to define the possible mappings.
    
    Notes are in a child <note/> element.
    
-->
<mappings>
    <!-- 
        =====================================
        SYMPLECTIC FIELD-> ORA FIELD MAPPINGS
        =====================================
    -->
    <ora_symplectic_field_mappings>
        <symplectic_field name="abstract">
            <if test="object is a patent, physical object, or ephemera"><ora_field>summary_documentation</ora_field></if>
            <if test="object is NOT patent, physical object, or ephemera"><ora_field>abstract</ora_field></if>
        </symplectic_field>
        
        <symplectic_field name="are-files-confidential"><computed /><note>We assuming this means ANY binary file is embargoed</note></symplectic_field>
        
        <symplectic_field name="author-licence"><ora_field>licence</ora_field></symplectic_field>
        
        <symplectic_field name="acceptance-date"><ora_field>acceptance_date</ora_field></symplectic_field>
        
        <symplectic_field name="associated-authors">
            <ora_field>contributors</ora_field>
            <ora_note>In ORA, associated contributors would have a role attribute, with role_title="contributor" and role_order denoting their position in the 'contributor' role order. Translators would have the role 'translator'</ora_note>
        </symplectic_field>    
        
        <symplectic_field name="addresses"><no_mapping /></symplectic_field>
        
        <symplectic_field name="associated-identifiers"><no_mapping /><ora_note>identifiers are mapped individually</ora_note></symplectic_field>
        
        <symplectic_field name="authors">
            <ora_field>contributors</ora_field>
            <ora_note>In ORA authors would have a role attribute, with contributors__contributor_roles__role_title="author" and contributors__contributor_roles__role_order denoting their position in the author order</ora_note>
        </symplectic_field>
        
        <!--Is this is correct? author URL is often author URL to publication-->
        <symplectic_field name="author-url"><no_mapping/><note>Was contributors__contributor_website_url but author-url is not author's personal website</note>
        
        <symplectic_field name="c-apc2"><no_mapping/><note>Deprecated field</note></symplectic_field>
        
        <symplectic_field name="c-apc"><ora_field>apc_admin_apc_requested</ora_field><note>New field mapping for 2.1</note></symplectic_field>
        
        <symplectic_field name="collections"><no_mapping /></symplectic_field>
        
        <symplectic_field name="commissioning-body"><ora_field>commissioning_body</ora_field></symplectic_field>
        
        <symplectic_field name="confidential">
            <if test="type_of_work==Report">
                <ora_field>confidential_report</ora_field>
                <ora_field>sub_type_of_work='Report'</ora_field>
                <note>If the item is a Report, the type of work should be Report and the sub_type_of_work should be 'Confidential report', see TYPE OF WORK MAPPIGNS, below</note>
            </if>
            <if test="type_of_work!=Report">
                <ora_field>confidential_report</ora_field>
            </if>
        </symplectic_field>
        
        <symplectic_field name="confidential-files-reason"><ora_field>binary_files__file_embargo_reason</ora_field></symplectic_field>
        
        <symplectic_field name="doi"><ora_field>identifier_doi</ora_field></symplectic_field>
        
        <symplectic_field name="edition"><ora_field>edition</ora_field></symplectic_field>
        
        <symplectic_field name="editors">
            <ora_field>contributors</ora_field>
            <ora_note>In ORA, editors would have a role attribute, with role_title="editor" and role_order denoting their position in the editor order. If the record was a Thesis, they would have the role_title of 'Supervisor'</ora_note>
        </symplectic_field>  
        
        <symplectic_field name="eissn"><ora_field>identifier_eissn</ora_field></symplectic_field>
        
        <symplectic_field name="embargo-release-date"><ora_field>binary_files__file_embargo_end_date</ora_field><note>A file which is embargoed but with no specified end date will have the end date 9999-12-31</note></symplectic_field>
        
        <symplectic_field name="external-identifiers">
            <if test="scheme is pubmed"><ora_field>identifier_pmid</ora_field></if>
            <if test="scheme is other"><ora_field>record_identifers__record_identifier</ora_field><ora_note>Identifiers with a mapping specified in the ORA Data Model should be mapped using those fields. The value of @scheme should be mapped to record_identifiers__record_identifier_scheme</ora_note></if>
        </symplectic_field>
        
        <symplectic_field name="filed-date">
            <if test="record is a Patent"><ora_field>patent_filed_date</ora_field></if>
            <if test="record is a Thesis"><no_mapping/></if>
        </symplectic_field>
        
        <symplectic_field name="finish-date"><ora_field>field:event_end_date</ora_field></symplectic_field>
        
        <symplectic_field name="funding-acknowledgements">
            <symplectic_child_field name="organisation"><ora_field>funders__funder_name</ora_field></symplectic_child_field>
            <symplectic_child_field name="grant-id"><ora_field>funders__funder_grant__grant_identifier</ora_field></symplectic_child_field>
        </symplectic_field>
        <symplectic_field name="isbn-10"><ora_field>identifier_isbn_10</ora_field></symplectic_field>
        
        <symplectic_field name="isbn-13"><ora_field>identifier_isbn_13</ora_field></symplectic_field>
        
        <symplectic_field name="issn"><ora_field>identifier_issn</ora_field></symplectic_field>
        
        <symplectic_field name="is-compliant-with-inst-policy"><ora_field>No mapping</ora_field><notes>ignore, this acts as OAM compliance override</notes></symplectic_field>
        
        <symplectic_field name="is-open-access"><no_mapping /><note>Set to True where Hyrax record (for OA Monitor logic). AB note: TODO: we may map this to licence_url</note></symplectic_field>
        
        <symplectic_field name="is-embargoed"><computed /><note>A file with ANY binary_files__file_embargo_end_date is embargoed.</note></symplectic_field>
        
        <symplectic_field name="issue"><ora_field>issue_number</ora_field></symplectic_field>
        
        <symplectic_field name="journal"><ora_field>journal_title</ora_field></symplectic_field>
                
        <symplectic_field name="language"><ora_field>language</ora_field></symplectic_field>
        
        <symplectic_field name="location">
            <if test="record is a Conference, Exhibition, Performance, or Presentation"><ora_field>event_location</ora_field></if>
            <if test="record is a Physical item"><ora_field>physical_location</ora_field></if>
            <if test="record is a Journal Article"><ora_field>citation_place_of_publication</ora_field></if>
            <if test="record is a Patent">patent_territory</if>
            <if test="record is a Dataset">data_physical_storage_location</if>
        </symplectic_field>
        
        <symplectic_field name="medium">
            <if test="record is a Physical item"><ora_field>physical_form</ora_field></if>
            <else><no_mapping/></else>
        </symplectic_field>
            
        <symplectic_field name="name-of-conference">
            <if test="record is Conference item/any or Composition/performance"><ora_field>event_title</ora_field></if>
        </symplectic_field>

        
        <symplectic_field name="notes"><ora_field>additional_information</ora_field><note>As other fields write to additional information, this should be appended to the additional_information value and not replace it</note></symplectic_field>
        
        <symplectic_field name="number">
            <if test="record is a Book Chapter"><ora_field>chapter_number</ora_field></if>
            <if test="record is a Journal Article"><ora_field>article_number</ora_field><note>The text "ARTN" should be removed from the front of an article number, leading zeros should also be removed</note></if>
            <if test="record is a Patent"><ora_field>patent_application_number</ora_field></if>
            <if test="record is a Working paper"><ora_field>paper_number</ora_field></if>
        </symplectic_field>
        
        <symplectic_field name="number-of-pieces"><no_mapping/></symplectic_field>
        
        <!--Fields not currently used as deposit option not enabled<symplectic_field name="oa-location-url"><ora_field>binary_files__file_public_url</ora_field></symplectic_field>
        
        <symplectic_field name="oa-location-file-version"><ora_field>binary_files__file_rioxx_file_version</ora_field></symplectic_field>
    -->
        
        <symplectic_field name="online-publication-date">
            <note>Crosswalk for deposit only. If null then map publication-date instead</note>
            <ora_field>citation_publication_date</ora_field>
        </symplectic_field>
        
        <symplectic_field name="pagination">
            <if test="pagination is given in page-count"><ora-field>pagination</ora-field><notes>Append " pages" to value, e.g. "32 pages"</notes></if>
            <if test="pagination is a range"><ora-field>pagination</ora-field><notes>Output as a range, separated by a '-', e.g '22-33'</notes></if>
            <if test="pagination is given both as a range and a page count"><ora-field>pagination</ora-field><note>Output as a range only, separated by a '-', e.g '22-33'</note></if>
        </symplectic_field>
        
        <symplectic_field name="parent-title"><ora_field>host_title</ora_field></symplectic_field>
        
        <symplectic_field name="patent-number"><ora_field>patent_number</ora_field></symplectic_field>
        
        <symplectic_field name="patent-status"><ora_field>patent_status</ora_field></symplectic_field>
        
        <symplectic_field name="p-requested-embargo-period"><ora_field>binary_files__file_embargo_period</ora_field><note>2.1 mapping, to be applied to all binary files on record</note></symplectic_field>
        
        <symplectic_field name="pii"><ora_field>identifier_pii</ora_field></symplectic_field>
        
        <symplectic_field name="place-of-publication"><ora_field>citation_place_of_publication</ora_field></symplectic_field>
        
        <symplectic_field name="public-url"><ora_field>has_public_url</ora_field></symplectic_field>
        
        <symplectic_field name="publication-date">
            <note>for deposit crosswalk, only map if online-publication-date' is null</note> 
            <if test="type_of_work == 'device/product'"><ora_field>production_date</ora_field></if>
            <else><ora_field>citation_publication_date</ora_field></else>
            <note>In the absence of any other information, the year component of this value should also become rights_copyright_date</note>
        </symplectic_field>

        
        <symplectic_field name="publication-status"><ora_field>host_publication_status</ora_field>
            <value_mappings>
                <value_map><symp_value>Published</symp_value><ora_value>Published</ora_value></value_map>
                <value_map><symp_value>Unpublished</symp_value><ora_value>Not published</ora_value></value_map>
                <value_map><symp_value>Accepted</symp_value><ora_value>Accepted</ora_value></value_map>
                <value_map><symp_value>Accepted</symp_value><ora_value>In press</ora_value></value_map><note>Harvest only</note>
                <value_map><symp_value>Submitted</symp_value><ora_value>submitted</ora_value></value_map>
                <value_map><symp_value>Submitted</symp_value><ora_value>Under review</ora_value></value_map><note>Harvest only</note>
                <value_map><symp_value>Published online</symp_value><ora_value>Under review</ora_value></value_map><note>Harvest only</note>
                <value_map><symp_value>Published online</symp_value><ora_value>Published</ora_value><note>Deposit only</note></value_map>
            </value_mappings>
            <note>See https://github.com/tomwrobel/ora_data_model/issues/70 also https://github.com/tomwrobel/ora_data_model/issues/112</note>
        </symplectic_field>
        
        <symplectic_field name="publisher">
            <if test="type_of_work == 'device/product'"><ora_field>manufacturer</ora_field></if>
            <else><ora_field>publisher_name</ora_field></else>
        </symplectic_field>
        
        <symplectic_field name="publisher-licence"><ora_field>licence</ora_field></symplectic_field>
        
        <symplectic_field name="publisher-url">
            <if test="type_of_work == 'device/product'"><ora_field>manufacturer_website_url</ora_field></if>
            <else><ora_field>publication_website_url</ora_field></else>
        </symplectic_field>
        
        <symplectic_field name="record-made-public-at-source-date"><ora_field>record_publication_date</ora_field></symplectic_field>
        
        <symplectic_field name="record-created-at-source-date"><ora_field>field:record_created_date</ora_field></symplectic_field>
        
        <symplectic_field name="relative-citation-ratio"><no_mapping/></symplectic_field>
        <symplectic_field name="field-citation-ratio"><no_mapping/></symplectic_field>
        <symplectic_field name="altmetric-attention-score"><no_mapping/></symplectic_field>
        
        <symplectic_field name="references"><no_mapping/></symplectic_field>
        
        <symplectic_field name="repository-status">
            <if test="there IS a record_publication_date">fixed value: Public</if>
            <if test="there is NO record_publication_date and ANY record_review_status">fixed value: Private (In review)</if>
            <if test="there is NO record_publication_date OR record_review_status">fixed value: Private</if>
        </symplectic_field>

        <!--<symplectic_field name="repository-status">
            <if test="has_public_url is set">fixed value: Public</if>
            <if test="has_public_url is not set">record_review_status</if><note>As documented in https://github.com/tomwrobel/ora_data_model/issues/2#issuecomment-478963073</note></symplectic_field>-->
        
        <symplectic_field name="series"><ora_field>series_title</ora_field></symplectic_field>
        
        <symplectic_field name="start-date">
            <if test="record is a Patent"><ora_field>patent_awarded_date</ora_field></if>
            <if test="record is not a Patent"><ora_field>event_start_date</ora_field></if>
        </symplectic_field>
        
        <symplectic_field name="thesis-type"><ora_field>thesis_degree_level</ora_field></symplectic_field>
        
        <symplectic_field name="title"><ora_field>title</ora_field></symplectic_field>
        
        <symplectic_field name="types">
            <note>If 'types' is the same as field:type_of_work it should be ignored</note>
            <if test="type_of_work == 'Journal article'">
                <if test="@display-name='Sub type(s)' AND api:item/text != ora_field:type_of_work AND ./text() == 'editorial comment'">
                    <ora_field>sub_type_of_work='Editorial'</ora_field>
                </if>
                <if test="@display-name='Sub type(s)' AND api:item/text != ora_field:type_of_work AND ./text() == 'rapid communication'">
                    <ora_field>sub_type_of_work='Correspondence'</ora_field>
                </if>
                <if test="@display-name='Sub type(s)' AND api:item/text != ora_field:type_of_work AND (./text() != 'editorial comment' OR ./text() != 'rapid communication')">
                    <ora_field>sub_type_of_work</ora_field>
                    <note>Value mapping note: the type should be title cased</note>
                </if>
            </if>
            <if>
                
            </if>
        </symplectic_field>
        
        
        <symplectic_field name="version">
            <!-- removed as 'will not be implemented in the initial release of ORA4 and relates only to the actual versioning of the ORA public record not bibliographic info' (GitHub #87)
            <if test="describing a record"><ora_field>record_version</ora_field></if>
            -->
            <!--Removed as SE field version does not descibe RIOXX version
            <if test="describing a binary file's Rioxx/Open access status, e.g. Version of Record"><ora_field>binary_files__file_rioxx_file_version</ora_field></if>-->
            
            <if test="type = Software/code">
                <ora_field>data_digital_data_version</ora_field><note>At object level</note>
            </if>
            <note>Deposit only, to pass initial paper version to ORA, but not to continuiously update from subsequent papers made available in ORA</note>
            <if test="type = Working paper">
            <ora_field>binary_files__file_version</ora_field> <note>At file level, if multiple files then take value from first file</note>
            </if>
        </symplectic_field>





        
        <symplectic_field name="volume"><ora_field>volume</ora_field></symplectic_field>
        
        
    <!-- 
        ===========================
        CONTRIBUTOR FIELDS
        ===========================
        
        All of these field names are found within api:people/api:person or api:depositor elements in Symplectic atom feeds.
        
        For each contributor, create a <mods:person @type="personal"><mods:nameIdentifier type="contributor_record_identifier">contributors__contributor_record_identifier</mods:nameIdentifier></mods:person>
        
        Contributors with multiple roles should be recorded only once, with multiple roles created for that person.
    -->
        <symplectic_field name="last-name"><ora_field>contributors__family_name</ora_field><note>Additionally: first names and last name should be added together to create the compound contributors__display_name field in the format "{first-names} {last-name}"</note></symplectic_field>
        <symplectic_field name="first-names"><ora_field>contributors__given_names</ora_field><note>See note for last-name</note></symplectic_field>
        <symplectic_field xpath="api:links/api:link[@type='elements/user']/@id"><ora_field>contributors__contributor_identifiers__contributor_identifier</ora_field><ora_field>contributors__contributor_identifiers__contributor_identifier_scheme="pubs_person_id"</ora_field></symplectic_field>
        <symplectic_field name="initials"><ora_field>contributors__initials</ora_field></symplectic_field>
        <symplectic_field name="full-name"><no_mapping/><note>Symplectic full names contain titles, which ORA does not use, instead the first and last names should be combined, as in last-name, above</note></symplectic_field>

   <!-- 
        ===========================
        CONTRIBUTOR ROLES
        ===========================
        
        How to determine a contributor's role from the PUBS:API xml
    -->
        <symplectic_field xpath="api:object/api:view[name='default']/api:field[@name='authors']"><ora_field>contributors__role__role_title="Author"</ora_field><note>Additionally: the role_order should follow the order in which an api:person appears in the api:people element</note></symplectic_field>
        <symplectic_field xpath="api:object/api:push-supplementary-info/api:depositor"><ora_field>contributors__role__role_title="Depositor"</ora_field><note>Additionally: the role_order should follow the order in which an api:person appears in the api:people element</note></symplectic_field>
        
        
    <!-- 
        ===========================================
        CONTRIBUTOR FIELDS FROM API RELATIONSHIPS
        ===========================================
        
        All of these field names are found within an api:relationship[@type='publication-user-authorship']/api:object['@category=user'] 
        with an @id corresponding to the api:links/api:link[@type='elements/user']/@id of a pubs:person or the @id of an api:depositor.
    -->
        <symplectic_field name="email-address"><ora_field>contributors__contributor_email</ora_field></symplectic_field>
        <symplectic_field xpath="api:organisation-defined-data[@field-number]='1']"><ora_field>contributors__division</ora_field></symplectic_field>
        <symplectic_field xpath="api:organisation-defined-data[@field-number]='2']"><ora_field>contributors__group</ora_field></symplectic_field>
        <symplectic_field name="primary-group-descriptor"><ora_field>contributors__department</ora_field><note>If this field is set, then contributors__institution should be set to "University of Oxford"</note></symplectic_field>
        <symplectic_field name="api:organisation-defined-data[@field-number]='7']"><ora_field>contributors__sub_department</ora_field></symplectic_field>
        <symplectic_field xpath="@proprietary-id"><ora_field>contributors__institutional_identifier</ora_field></symplectic_field>
        <symplectic_field xpath="api:user-identifier-associations/api:user-identifier-association">
            <if test="@scheme='orcid'">
                <ora_field>contributors__orcid_identifier</ora_field>
            </if>
            <else>
                <ora_field>contributors__contributor_identifiers__contributor_identifier_scheme="@scheme"</ora_field>
                <ora_field>contributors__contributor_identifiers__contributor_identifier</ora_field>
                <note>The scheme for the user-identifier-association should become the value of the contributor_identifiers_scheme. However email-address should not be mapped</note>
            </else>
        </symplectic_field>
        <symplectic_field xpath="api:neighbourhood/api:related-groups/api:related-group[@id='1'][@membership_type='implicit']"><if test="Another personal affiliation is set, but no value is set for contributors__institution">
            <ora_field>contributors__institution</ora_field>
        </if></symplectic_field>
        <symplectic_field name="figshare-for-institutions-user-account-id"><ora_field>contributors__institutional_identifier</ora_field></symplectic_field>

    <!-- 
        =================================
        FUNDERS WITHOUT CONTRIBUTOR LINKS
        =================================
        
        For each funder, create a <mods:person @type="corporate"><mods:role><mods:roleTerm type='text'>Funder</mods:roleTerm></mods:role></mods:person>
        
        Funders without links to contributors are identified either by an <api:grant> or an api:relationship[@type='publication-grant-funded']
    -->
        <symplectic_field xpath="api:field[@name='funding-acknowledgements']/api:funding-acknowledgements/api:grants/api:grant/api:organisation"><ora_field>funders__funder_name</ora_field></symplectic_field>
        <symplectic_field xpath="api:field[@name='funding-acknowledgements']/api:funding-acknowledgements/api:grants/api:grant/api:grant-id"><ora_field>funders__funder_grant__grant_identifier</ora_field></symplectic_field>
        <symplectic_field xpath="api:field[@name='funding-acknowledgements']/api:funding-acknowledgements/api:acknowledgement-text"><ora_field>additional_information</ora_field>
            <note>As multiple values can be added to this field, this should append to existing values not a replace them</note></symplectic_field>
        <symplectic_field name="funder-name"><ora_field>funders__funder_name</ora_field></symplectic_field>
        <symplectic_field name="funder-reference"><ora_field>funders__funder_grant__grant_identifier</ora_field></symplectic_field>        

    <!-- 
        ===========================
        DEPOSIT INFO
        ===========================
        
        Information related to record deposit
        
    -->
        <symplectic_field xpath="api:deposit-info[@type='initial']/api:date"><ora_field>record_deposit_date</ora_field></symplectic_field>
        <symplectic_field xpath="deposit-info/deposit-licence-info/identifier"><ora_field>record_ora_deposit_licence</ora_field><note>Note that this is set in two places, in the record dmdSec and in amdSec/rightsMD</note></symplectic_field>
        
        
    <!--
        ==========================
        OPEN ACCESS MONITORING
        ==========================
        
        Information contained within api:oa elements
    -->
        <symplectic_field name="oa-policy-exception-type"><ora_field>ref_exception_required</ora_field></symplectic_field>
        <symplectic_field name="oa-policy-exception-comment"><ora_field>ref_other_exception_note</ora_field></symplectic_field>
 
        
    <!-- 
        ===========================
        Implied values fields
        ===========================
        
        Fields that can be populated from implied values
    -->
        <symplectic_field><ora_field>record_content_source="Symplectic Elements"</ora_field></symplectic_field>
        <symplectic_field><ora_field>ora_data_model_version="2.0"</ora_field></symplectic_field>
        <symplectic_field><ora_field>requires_review="true"</ora_field></symplectic_field>
        <symplectic_field><ora_field>record_embargo_end_date="9999-12-31"</ora_field></symplectic_field>
        <symplectic_field xpath="api:object/@id"><ora_field>identifier_pubs_identifier</ora_field></symplectic_field>
        <symplectic_field xpath="api:object/@id"><ora_field>tinypid</ora_field><note>The value should be prefixed by the string "pubs:", e.g. "pubs:1234"</note></symplectic_field>
        <symplectic_field xpath="api:object/@type"><ora_field>type_of_work</ora_field><note>TODO: a field mapping list will be required</note></symplectic_field>
        
        
    <!-- 
        ======================================================
        RELATED ITEMS IN PUBLICATION-PUBLICATION RELATIONSHIPS
        ======================================================
        
        All of these field names are found within an api:relationship[@type='publication-publication-derivative']/api:object['@category=publication'] 
    -->
        <symplectic_field name="title"><ora_field>related_items__related_item_title</ora_field></symplectic_field>
        <symplectic_field name="doi"><ora_field>related_items__related_item_url</ora_field></symplectic_field>
        <symplectic_field name="journal"><if test="There is no doi for the related item"><ora_field>related_items__related_item_citation</ora_field></if>
            <note>Ideally, a citation should be constructed from available citation dates: year of publication, journal title, number, pagination, etc.</note>
        </symplectic_field>
        
        
        
        <!-- 
            Oxford custom fields
            ====================
        -->
        
        <oxford_symplectic_field number="01" name="division-affiliation"><ora_field>contributors__division</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="02" name="Academic Affiliations"><ora_field>contributors__institution</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="03" name="College Affiliation"><ora_field>contributors__oxford_college</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="04" name="Job Description"><ora_field>contributors__roles__role_title</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="05" name="ORCID"><ora_field>contributors__orcid_identifier</ora_field></oxford_symplectic_field><notes>This is not held in users table,so not crosswalked. ORCID is crosswalked from user.identifiers.</notes></symplectic_field>
        
        <oxford_symplectic_field number="06" name="Department Affiliation"><ora_field>contributors__department</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="07" name="Sub Unit Affiliation"><ora_field>contributors__sub_unit</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="09" name="Student"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="10" name="Source"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="11" name="HESA Staff ID"><ora_field>contributors__contributor_identifiers__contributor_identifier</ora_field><ora_field>contributors__contributor_identifier__contributor_identifier_scheme="HESA"</ora_field><to_do>Which institutional identifier field is right?</to_do></oxford_symplectic_field>
        
        <oxford_symplectic_field number="12" name="Employee No"><ora_field>contributors__contributor_identifiers__contributor_identifier</ora_field><ora_field>contributors__contributor_identifier__contributor_identifier_scheme="EmployeeNumber"</ora_field></oxford_symplectic_field>
        
        <oxford_symplectic_field number="13" name="UOA"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="14" name="REFCat14"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="15" name="Eligible"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="16" name="Return"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="17" name="REF Module User"><no_mapping /><to_do /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="18" name="Employee No [BizTalk]"><ora_field>contributors__contributor_identifiers__contributor_identifier</ora_field><ora_field>contributors__contributor_identifier__contributor_identifier_scheme="HESA"</ora_field><to_do>Which institutional identifier field is right?</to_do></oxford_symplectic_field>
        
        <oxford_symplectic_field number="19" name="Date Modified [BizTalk]"><no_mapping /><ora_field></ora_field></oxford_symplectic_field>
        
        <!-- Fields 20-22 are notes fields used by the Symplectic team and will not be mapped -->
        
        <oxford_symplectic_field number="20" name="Generic20"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="21" name="Generic21"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="22" name="Generic22"><no_mapping /></oxford_symplectic_field>
        
        <!-- Fields 23+ are deprecated and will not be mapped -->
        
        <oxford_symplectic_field number="23" name="Local [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="24" name="User table ID [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="25" name="Title [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="26" name="Initials [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="27" name="First Name [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="28" name="Last Name [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="29" name="Known as [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="30" name="Suffix [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="31" name="Email [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="32" name="ProprietaryID [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="33" name="Username [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="34" name="Authenticating Authority [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="35" name="IsAcademic [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="36" name="IsCurrent [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="37" name="Login Allowed [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="38" name="Primary Group Descriptor [Original]"><no_mapping /><to_do/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="39" name="Arrive Date [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="40" name="Leave Date [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="41" name="Division [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="42" name="Academic Affiliation [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="43" name="College Affiliation [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="44" name="Job Description [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="45" name="ORCiD [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="46" name="SSO [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="47" name="Employee ID [Original]"><no_mapping/></oxford_symplectic_field>
        
        <oxford_symplectic_field number="48" name="Generic08"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="49" name="Student [Original]"><no_mapping /></oxford_symplectic_field>
        
        <oxford_symplectic_field number="50" name="Source [Original]"><no_mapping /></oxford_symplectic_field>
        
    
    
    </ora_symplectic_field_mappings>
    
    
    <!-- 
        ===========================
        TYPE OF WORK MAPPINGS
        ===========================
        
        This section details how to map work types, especially in the context of the Sword2 Hyrax-Work-Model header
        
        symplectic_work_type = name of Symplectic type of work
        symplectic_sub_type = 
          - name of Symplectic sub type, corresponds to the value set at '//pubs:field[@name="types"][@display-name="Sub types']'. 
          - Note that if this is the same as symplectic_work_type ignore it. 
          - If more than one sub type, take the first value
        ora_work_type =  name of ORA type of work (field:type_of_work) in the data model
        hyrax_work_type = name of Hyrax Work Type to be set in the Hyrax-Work-Model header in all cases
        ora_sub_type_of_work = name of ORA sub type of work (field:sub_type_of_work), see also the Symplectic 'types' field mapping instructions above
    -->
    
    <work-type-mappings>
        <!-- Books (book, scholarly edition, edited book, translation -->
        <symplectic_work_type>book
            <ora_work_type>Book</ora_work_type>
            <hyrax_work_type>Book</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        <symplectic_work_type>scholarly edition
            <ora_work_type>Book</ora_work_type>
            <hyrax_work_type>Book</hyrax_work_type>
            <ora_sub_type_of_work>Scholarly edition</ora_sub_type_of_work>
        </symplectic_work_type>
        <symplectic_work_type>edited book
            <ora_work_type>Book</ora_work_type>
            <hyrax_work_type>Book</hyrax_work_type>
            <ora_sub_type_of_work>Edited book</ora_sub_type_of_work>
        </symplectic_work_type>
        <symplectic_work_type>translation
            <ora_work_type>Book</ora_work_type>
            <hyrax_work_type>Book</hyrax_work_type>
            <ora_sub_type_of_work>Translation</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Book sections (chapter) -->
        <symplectic_work_type>chapter
            <ora_work_type>Book section</ora_work_type>
            <hyrax_work_type>BookSection</hyrax_work_type>
            <ora_sub_type_of_work>Chapter</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Compositions (composition, performance)-->
        <symplectic_work_type>composition
            <ora_work_type>Composition</ora_work_type>
            <hyrax_work_type>Composition</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        <symplectic_work_type>performance
            <ora_work_type>Composition</ora_work_type>
            <hyrax_work_type>Composition</hyrax_work_type>
            <ora_sub_type_of_work>Performance</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Conference item (conference paper, exhibition, presentation)-->
        <symplectic_work_type>conference paper
            <ora_work_type>Conference item</ora_work_type>
            <hyrax_work_type>ConferenceItem</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        <symplectic_work_type>exhibition
            <ora_work_type>Conference item</ora_work_type>
            <hyrax_work_type>ConferenceItem</hyrax_work_type>
            <ora_sub_type_of_work>Exhibition</ora_sub_type_of_work>
        </symplectic_work_type>
        <symplectic_work_type>presentation
            <ora_work_type>Conference item</ora_work_type>
            <hyrax_work_type>ConferenceItem</hyrax_work_type>
            <ora_sub_type_of_work>Presentation</ora_sub_type_of_work>
        </symplectic_work_type>
       <symplectic_work_type>poster
            <ora_work_type>Conference item</ora_work_type>
            <hyrax_work_type>ConferenceItem</hyrax_work_type>
            <ora_sub_type_of_work>Poster</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Dataset (fileset, media, figure, software/code, design -->
        <symplectic_work_type>fileset
            <ora_work_type>Dataset</ora_work_type>
            <hyrax_work_type>Dataset</hyrax_work_type>
            <ora_sub_type_of_work>Fileset</ora_sub_type_of_work>
        </symplectic_work_type>
        <symplectic_work_type>media
            <ora_work_type>Dataset</ora_work_type>
            <hyrax_work_type>Dataset</hyrax_work_type>
            <ora_sub_type_of_work>Media</ora_sub_type_of_work>
        </symplectic_work_type>
        <symplectic_work_type>figure
            <ora_work_type>Dataset</ora_work_type>
            <hyrax_work_type>Dataset</hyrax_work_type>
            <ora_sub_type_of_work>Media</ora_sub_type_of_work>
        </symplectic_work_type>         
        <symplectic_work_type>software/code
            <ora_work_type>Dataset</ora_work_type>
            <hyrax_work_type>Dataset</hyrax_work_type>
            <ora_sub_type_of_work>Software</ora_sub_type_of_work>
        </symplectic_work_type>        
        <symplectic_work_type>design
            <ora_work_type>Dataset</ora_work_type>
            <hyrax_work_type>Dataset</hyrax_work_type>
            <ora_sub_type_of_work>Design</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Internet publication -->
        <symplectic_work_type>internet publication
            <ora_work_type>Internet publication</ora_work_type>
            <hyrax_work_type>InternetPublication</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        
        
        <!-- Journal article (journal article, sub types: editorial comment, review, rapid communication, addendum, corrigendum, letter) -->
        <symplectic_work_type>journal article
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>editorial comment</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Editorial</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>review</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Review</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>rapid communication</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Correspondence</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>addendum</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Addendum</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>corrigendum</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Corrigendum</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>journal article
            <symplectic_sub_type>letter</symplectic_sub_type>
            <ora_work_type>Journal article</ora_work_type>
            <hyrax_work_type>JournalArticle</hyrax_work_type>
            <ora_sub_type_of_work>Letter</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Patent -->
        <symplectic_work_type>patent
            <ora_work_type>Patent</ora_work_type>
            <hyrax_work_type>Patent</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        
        
        <!-- Physical object (artefact, device/product) -->
        <symplectic_work_type>artefact
            <ora_work_type>Pysical object</ora_work_type>
            <hyrax_work_type>PhysicalObject</hyrax_work_type>
            <ora_sub_type_of_work>Artifact</ora_sub_type_of_work>
        </symplectic_work_type>
        
        <symplectic_work_type>device/product
            <ora_work_type>Pysical object</ora_work_type>
            <hyrax_work_type>PhysicalObject</hyrax_work_type>
            <ora_sub_type_of_work>Device/product</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Report -->
        <symplectic_work_type>report
            <ora_work_type>Report</ora_work_type>
            <hyrax_work_type>Report</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        
        <symplectic_work_type>report
            <note>Where SE field 'confidential' has been selected</note>
            <ora_work_type>Report</ora_work_type>
            <hyrax_work_type>Report</hyrax_work_type>
            <ora_sub_type_of_work>Confidential report</ora_sub_type_of_work>
        </symplectic_work_type>
        
        
        <!-- Thesis -->
        <symplectic_work_type>thesis/dissertation
            <ora_work_type>Thesis</ora_work_type>
            <hyrax_work_type>Thesis</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>
        
        
        <!-- Thesis -->
        <symplectic_work_type>working paper
            <ora_work_type>Working paper</ora_work_type>
            <hyrax_work_type>WorkingPaper</hyrax_work_type>
            <ora_sub_type_of_work />
        </symplectic_work_type>      
    </work-type-mappings>

</mappings>

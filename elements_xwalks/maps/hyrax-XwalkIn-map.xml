<?xml version="1.0" encoding="utf-8"?>
<xwalkin:consolidated-maps xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:foxml="info:fedora/fedora-system:def/foxml#" xmlns:mods="http://www.loc.gov/mods/v3" xmlns:ora="http://ora.ox.ac.uk/terms/" xmlns:ora_admin="http://ora.ox.ac.uk/vocabs/admin" xmlns:ora_dataset="https://ora.ox.ac.uk/vocabs/dataset" xmlns:ora_open_access_admin="http://ora.ox.ac.uk/vocabs/open_access_admin" xmlns:ora_patent="https://ora.ox.ac.uk/vocabs/patent" xmlns:oxds="http://vocab.ox.ac.uk/dataset/schema#" xmlns:rioxxterms="http://www.rioxx.net/schema/v2.0/rioxx/" xmlns:symp="http://symplectic/symplectic-elements:def/model#" xmlns:uketd_dc="http://naca.central.cranfield.ac.uk/ethos-oai/2.0/" xmlns:uketdterms="http://naca.central.cranfield.ac.uk/ethos-oai/terms/" xmlns:xwalk="http://www.symplectic.co.uk/elements/xwalkcommon" xmlns:xwalkin="http://www.symplectic.co.uk/elements/xwalkin">
  <!--
ISSUES:

 -->
  <!--Changelog
09/12/22: For Discovery updated to <xwalk:field-source data-part="file:mime-type" from="dc:format" /
16/11/22: Udate publisher-url (GitLab Issue #197)
10/08/2022: Update publisher-url to placeTerm
12/05/2022: Added 'Case note' subtype for journal articles
18/12/2020: Harvest journal (series-title) in SE from series title in ORA for WPs only
19/08/20: Added value map to convert em-dash to hyphen for pagination
14/04/20: Updated author order for 5.20 (as per Pull request #182)
30/03/20: Merged AB fix for author order (Pull request #182)
02/02/2020: New ORA subtype Device/Product (as opposed to separate subtypes for device and product) as per Gitub issue #158. Also harvest data s production date for that subtype.
10/02/20: Repository status - all items not Public should be Private (In review)
30/01/20: Commented out record level embargo end date following embargo compliance issues
23/01/19: Update mapping to SE Notes (Github #166)
09/01/17: Updated confidential as per GitHub #159
06/01/20: 
- Debugged external identifiers
- Added pmc, nihms to external identifiers
- Added commented out text should it be needed for abstract harvest (GitHub issue #138)
20/12/19: Updated confidential value map (GitHub issue #159)
19/12/19: Added SE 'confidential' value map to filter out non-booleans (GitHub issue #159)
10/12/19: Added apc value map (lower to upper case boolean)
09/12/19: Updated to not harvest citation_place_of_publication to location (use place-of-publication) as per gitHub issue #88
26/11/19:
- removed apc value map
- corrected physical item ->physical object in conditional
20/11/19: updated journal article subtype mapping (Git issue #134)
19/11/19:
- Updated subtypes value-map (Erratum)
- Removed associated identifiers from to do list.
- Aded value-map name-"Licences"  (Git issue #131)
- added boolean value map for apcs
18/11/19: 
- updated file level and record level OA
- Updated types value map.
06/11/19: Updated confidential boolean to all lower case'true'
05/11/2019: 
- Updated is-open-access boolean to all lower case'true'
- Updated object-type-selection for Conference item (no subtype) from 'conference-paper' to 'conference'
04/11/2019: 
- updated publication-status as per Git issue #112 https://github.com/tomwrobel/ora_data_model/issues/112
- Removed crosswalk for compliant-with-inst-policy
- Updated repository-status to use ora_admin:record_publication_date and ora_admin:record_review_status instead of public url. repository-status value map no longer needed.
25/10/2019: 
- Commented out oa-location-url and oa-location-file-version, as this means of deposit is not currently enabled in SE
- Set is-open-access value to true (for OAM compliance logic)
24/10/2019:
- Added in external identifiers - to harvest pubmed ID
- Updated publication-status value map for new ORA capitalisation, and 'othwerwise' to 'ignore this value' rather than 'published online'
21/10/2019: Updated version (#87)
15/10/2019 Added confidential
14/10/2019 Added from physial_storage_location for dataset where no DOI
11-10/2019 Added publisher
10/10/2019 Added PMID external identifier
9/10/2019 Updated start-date to include patent
8/10/2019 Added Product condition to publication-date

-->
  <xwalk:field-maps>
    <xwalk:field-map name="file-metadata-map">
      <xwalk:field-mapping to="file">
        <xwalk:field-source from="ora:repository_file">
          <xwalk:field-source data-part="file:proprietary-id" from="ora:filesetId" />
          <xwalk:field-source data-part="file:url" from="symp:hasPublicUrl" />
          <xwalk:field-source data-part="file:name" from="dc:title" />
          <xwalk:field-source data-part="file:mime-type" from="dc:format" />
          <xwalk:field-source data-part="file:size" from="dcterms:extent" />
          <xwalk:field-source data-part="file:version" from="rioxxterms:version" />
          <xwalk:field-source data-part="file:embargo-release-date" from="oxds:embargoedUntil" />
          <!-- added as per S Ltd ticket 240083-->
          <xwalk:field-source data-part="file:is-held-at-source" value="true" />
        </xwalk:field-source>
      </xwalk:field-mapping>
    </xwalk:field-map>
    <xwalk:field-map name="default-map">
      <xwalk:include-field-map name="contributors" />
      <xwalk:include-field-map name="identifiers" />
      <xwalk:include-field-map name="journal-markup" />
      <xwalk:include-field-map name="access-conditions" />
      <xwalk:field-mapping to="public-url">
        <xwalk:field-source from="location/url" />
      </xwalk:field-mapping>
      <!-- SE RESERVED FIELDS-->
      <xwalk:field-mapping to="repository-status">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition argument-field="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/ora_admin:admin/ora_admin:record_publication_date" operator="has-value" select-using="xpath" />
            <xwalk:result>
              <xwalk:field-source value="Public" />
            </xwalk:result>
          </xwalk:when>
          <!-- Updated whilst there are blank record_review_status values in ORA <xwalk:when>
            <xwalk:condition argument-field="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/ora_admin:admin/ora_admin:record_review_status" operator="has-value" select-using="xpath"/>
            <xwalk:result>
              <xwalk:field-source value="Private (In review)"/>
            </xwalk:result>
          </xwalk:when> -->
          <xwalk:otherwise>
            <xwalk:result>
              <xwalk:field-source value="Private (In review)" />
            </xwalk:result>
          </xwalk:otherwise>
        </xwalk:choose>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="confidential-files-reason">
        <xwalk:field-source from="/mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/ora:repository_file/ora:reasonForEmbargo" select-using="xpath" />
      </xwalk:field-mapping>
      <!--Commented out to test issue with AB<xwalk:field-mapping to="embargo-release-date">
        <xwalk:field-source from="/mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/ora:repository_file/oxds:embargoedUntil" select-using="xpath"/>
      </xwalk:field-mapping>-->
      <xwalk:field-mapping to="record-made-public-at-source-date">
        <xwalk:field-source from="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/mods:recordCreationDate" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="record-created-at-source-date">
        <xwalk:field-source from="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:recordInfo/mods:recordCreationDate" select-using="xpath" />
      </xwalk:field-mapping>
      <!-- Is effectively 'is there a Hyrax record', used for OA monitor logic-->
      <!-- commented out on suggestion of AB S Ltd ticket 240083
      <xwalk:field-mapping to="is-open-access"

        <xwalk:field-source value="true"/></xwalk:field-mapping>-->
      <!--Fields not currently used as Oa location option not enabled
      <xwalk:field-mapping to="oa-location-url"><xwalk:field-source from="/mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/ora:repository_file/symp:hasPublicUrl" select-using="xpath"/></xwalk:field-mapping><xwalk:field-mapping to="oa-location-file-version"><xwalk:field-source from="/mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/ora:repository_file/rioxxterms:version" select-using="xpath"/></xwalk:field-mapping>-->
      <!-- Use this if needed see GitHub #138

      <xwalk:field-mapping to="abstract"><xwalk:if><xwalk:condition operator="or"><xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition><xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Patent</xwalk:condition><xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Ephemera</xwalk:condition></xwalk:condition><xwalk:result><xwalk:field-source from="/mods:mods/mods:abstract[@type = 'summary_documentation']" select-using="xpath"/></xwalk:result><xwalk:else><xwalk:result><xwalk:field-source from="abstract"/></xwalk:result></xwalk:else></xwalk:if></xwalk:field-mapping>-->
      <xwalk:field-mapping to="abstract">
        <xwalk:field-source from="abstract" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="title">
        <xwalk:field-source from="titleInfo/title" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="keywords">
        <xwalk:field-source from="subject/genre" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="field-47">
        <xwalk:field-source from="titleInfo/subTitle" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="language">
        <xwalk:field-source from="language/languageTerm" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="acceptance-date">
        <xwalk:field-source from="/mods:mods/mods:originInfo/mods:dateOther[@type = 'date_of_acceptance']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="publication-date">
        <xwalk:if>
          <xwalk:condition operator="and">
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
            <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Device/Product</xwalk:condition>
          </xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:originInfo/mods:dateOther[@type = 'production_date']" select-using="xpath" />
          </xwalk:result>
          <xwalk:else>
            <xwalk:result>
              <xwalk:field-source from="originInfo/dateIssued" />
            </xwalk:result>
          </xwalk:else>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="publication-status">
        <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'host']/mods:physicalDescription/mods:form[@type = 'status']" select-using="xpath" value-map="publication-status" />
      </xwalk:field-mapping>
      <!--><xwalk:field-mapping to="publisher-url">
        <xwalk:field-source from="/mods:mods/mods:placeTerm[@type = 'code']" select-using="xpath" />
      </xwalk:field-mapping>-->
      <xwalk:field-mapping to="edition">
        <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'host']/mods:part/mods:detail[@type = 'edition']/mods:number" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="series">
        <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'series']/mods:titleInfo/mods:title" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="medium">
        <xwalk:field-source from="/mods:mods/mods:physicalDescription/mods:form[@type = 'physical_form']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="notes">
        <xwalk:field-source from="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:recordInfo/mods:recordInfoNote[@type='deposit_note']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="name-of-conference">
        <xwalk:if>
          <xwalk:condition operator="or">
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Composition</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Performance</xwalk:condition>
            </xwalk:condition>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
          </xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:relatedItem[@otherType = 'event']/mods:titleInfo/mods:title" select-using="xpath" />
          </xwalk:result>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="parent-title">
        <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'host']/mods:titleInfo/mods:title" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="place-of-publication">
        <xwalk:field-source from="/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type='text']" select-using="xpath" />
      </xwalk:field-mapping>
      <!-- added 10/8/22
      <xwalk:field-mapping to="publisher-url">
        <xwalk:field-source from="/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type='code']" select-using="xpath" />
      </xwalk:field-mapping>
      Updated below 16/11/22-->
      
      
      <xwalk:field-mapping to="publisher-url">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:relatedItem[@otherType = 'event']/mods:location/mods:url" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Device/Product</xwalk:condition>
            </xwalk:condition>
            <xwalk:result>
              <!--<xwalk:field-source from="/*/mods:name[@type='corporate' and string(mods:role/mods:roleTerm) = 'Manufacturer']/mods:displayForm" select-using="xpath" />-->
              <xwalk:field-source from="/*/mods:name[@type='corporate' and string(mods:role/mods:roleTerm) = 'Manufacturer']/mods:nameIdentifier[@type='website']" select-using="xpath" />
              
            </xwalk:result>
          </xwalk:when>
          <xwalk:otherwise>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type='code']" select-using="xpath" />
            </xwalk:result>
          </xwalk:otherwise>
        </xwalk:choose>
      </xwalk:field-mapping>
      
      
      <xwalk:field-mapping to="number">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book section</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Chapter</xwalk:condition>
            </xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:relatedItem[@type='host']/mods:part/mods:detail[@type='chapter_number']" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Journal article</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'host']/mods:part/mods:detail[@type = 'article']/mods:number" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Working paper</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:identifier[@type = 'paper_number']" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Patent</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:application_number" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
        </xwalk:choose>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="publisher">
        <xwalk:if>
          <xwalk:condition operator="or">
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Device</xwalk:condition>
            </xwalk:condition>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Product</xwalk:condition>
            </xwalk:condition>
          </xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/*/mods:name[@type='corporate' and string(mods:role/mods:roleTerm) = 'Manufacturer']/mods:displayForm" select-using="xpath" />
          </xwalk:result>
          <xwalk:else>
            <xwalk:result>
              <xwalk:field-source from="/*/mods:name[@type='corporate' and string(mods:role/mods:roleTerm) = 'Publisher']/mods:displayForm" select-using="xpath" />
            </xwalk:result>
          </xwalk:else>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="commissioning-body">
        <xwalk:field-source from="/*/mods:name[@type='corporate' and string(mods:role/mods:roleTerm) = 'Commissioning body']/mods:displayForm" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="start-date">
        <xwalk:if>
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Patent</xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:awarded_date" select-using="xpath" />
          </xwalk:result>
          <xwalk:else>
            <xwalk:result>
              <xwalk:field-source from="/*/mods:relatedItem[@otherType = 'event']/mods:originInfo/mods:dateOther[@point='start']" select-using="xpath" />
            </xwalk:result>
          </xwalk:else>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="finish-date">
        <xwalk:field-source from="/*/mods:relatedItem[@otherType = 'event']/mods:originInfo/mods:dateOther[@point='end']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="location">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition operator="or">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
              <xwalk:condition operator="and">
                <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Composition</xwalk:condition>
                <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Performance</xwalk:condition>
              </xwalk:condition>
            </xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:relatedItem[@otherType = 'event']/mods:location/mods:physicalLocation" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <!--<xwalk:when><xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Journal article</xwalk:condition><xwalk:result><xwalk:field-source from="/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type='text']" select-using="xpath"/></xwalk:result></xwalk:when>-->
          <xwalk:when>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:identifier[@type='doi']" operator="has-value" select-using="xpath" />
            </xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:extension/ora_dataset:dataset/ora_dataset:digital_storage_location" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:extension/ora_dataset:dataset/ora_dataset:physical_storage_location" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:location/mods:physicalLocation" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
          <xwalk:when>
            <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Patent</xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:territory" select-using="xpath" />
            </xwalk:result>
          </xwalk:when>
        </xwalk:choose>
      </xwalk:field-mapping>
      <!-- move to patent?-->
      <xwalk:field-mapping to="filed-date">
        <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:filed_date" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="patent-status">
        <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:status" select-using="xpath" />
      </xwalk:field-mapping>
      <!--move to OA?-->
      <xwalk:field-mapping to="c-apc">
        <xwalk:field-source from="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/ora_open_access_admin:ref_admin/ora_open_access_admin:apc_admin_apc_requested" select-using="xpath" value-map="apc" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="version">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Software</xwalk:condition>
            </xwalk:condition>
            <xwalk:result>
              <xwalk:field-source from="/mods:mods/mods:extension/ora_dataset:dataset/dc:version" select-using="xpath" />
            </xwalk:result>
            <!--Initially do data_digital_data_version only, not binary_files__file_version
      <xwalk:when><xwalk:result><note>Will take value form first file</note><xwalk:field-source from="/mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/ora:repository_file/dcterms:hasVersion" select-using="xpath"/></xwalk:result>-->
          </xwalk:when>
        </xwalk:choose>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="types">
        <xwalk:if>
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Journal article</xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:genre[@type='sub_type_of_work']" select-using="xpath" value-map="types" />
          </xwalk:result>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="funding-acknowledgements">
        <xwalk:field-source data-part="funding-acknowledgements:grant">
          <xwalk:field-source data-part="funding-acknowledgements-grant:org" from="/*/mods:name[@type='corporate']/mods:nameIdentifier[@type='funder_identifier']" select-using="xpath" />
          <xwalk:field-source data-part="funding-acknowledgements-grant:id" from="/*/mods:name[@type='corporate']/mods:affiliation/ora_admin:funding/ora_admin:funder_grant/ora_admin:grant_identifier" select-using="xpath" />
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="confidential">
        <xwalk:choose>
          <xwalk:when>
            <xwalk:condition operator="and">
              <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Report</xwalk:condition>
              <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Confidential report</xwalk:condition>
            </xwalk:condition>
            <xwalk:result>
              <xwalk:field-source value="true" />
            </xwalk:result>
          </xwalk:when>
          <!--Removed as per GitHub #159
          <xwalk:when>
            <xwalk:condition argument-field="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:recordInfo/mods:recordInfoNote[@type='confidential_report']" operator="has-value" select-using="xpath"/>
            <xwalk:result>
              <xwalk:field-source from="/mets:mets/mets:amdSec/mets:sourceMD/mets:mdWrap/mets:xmlData/mods:mods/mods:recordInfo/mods:recordInfoNote[@type='confidential_report']" select-using="xpath" value-map="confidential"/>
            </xwalk:result>
          </xwalk:when>-->
        </xwalk:choose>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="thesis-type">
        <xwalk:if>
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Thesis</xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:extension/uketd_dc:uketddc/uketdterms:qualificationlevel" select-using="xpath" />
          </xwalk:result>
        </xwalk:if>
      </xwalk:field-mapping>
    </xwalk:field-map>
    <xwalk:field-map name="contributors">
      <xwalk:field-mapping to="authors">
        <xwalk:field-source from="/mods:mods/mods:name[@type = 'personal' and mods:role/mods:roleTerm/text() = 'Author']" select-using="xpath">
          <xwalk:field-source data-part="person:firstnames" from="/*/mods:namePart[@type = 'given']" select-using="xpath" />
          <xwalk:field-source data-part="person:lastname" from="/*/mods:namePart[@type = 'family']" select-using="xpath" />
          <!-- Workaround author ordering issue - GitHub issue 181 (https://github.com/tomwrobel/ora_data_model/issues/181), support ticket https://support.symplectic.co.uk/a/tickets/260733. -->
          <!-- Map the relevant role_order for this author to a data-part which is not used for output: person:id (this data-part only normally takes effect) during deposit xwalks. -->
          <!-- This value will be used in an overriden XSL template which will be added to the Custom\hyrax-XwalkIn.xsl file, which will apply a sort before rendering author-list fields. -->
          <xwalk:field-source data-part="list:sort-integer" from="/*/mods:role[mods:roleTerm/text() = 'Author']/mods:extension/ora:role_order" select-using="xpath" />
          <xwalk:field-source data-part="person:identifier" from="nameIdentifier">
            <xwalk:field-source data-part="identifier:scheme" from="@type" value-map="name-identifier" />
            <xwalk:field-source data-part="identifier:value" from="." />
          </xwalk:field-source>
          <xwalk:field-source data-part="person:address" from="/*/mods:affiliation/ora:affiliation" select-using="xpath">
            <xwalk:field-source data-part="address:organisation" from="/*/ora:affiliationComponent[@type='institution']" select-using="xpath" />
            <xwalk:field-source data-part="address:suborganisation" from="/*/ora:affiliationComponent[@type='department']" select-using="xpath" />
          </xwalk:field-source>
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="editors">
        <xwalk:field-source from="/mods:mods/mods:name[@type = 'personal' and mods:role/mods:roleTerm/text() = 'Editor']" select-using="xpath">
          <xwalk:field-source data-part="person:firstnames" from="/*/mods:namePart[@type = 'given']" select-using="xpath" />
          <xwalk:field-source data-part="person:lastname" from="/*/mods:namePart[@type = 'family']" select-using="xpath" />
          <!-- Workaround author ordering issue - GitHub issue 181 (https://github.com/tomwrobel/ora_data_model/issues/181), support ticket https://support.symplectic.co.uk/a/tickets/260733. -->
          <!-- Map the relevant role_order for this author to a data-part which is not used for output: person:id (this data-part only normally takes effect) during deposit xwalks. -->
          <!-- This value will be used in an overriden XSL template which will be added to the Custom\hyrax-XwalkIn.xsl file, which will apply a sort before rendering author-list fields. -->
          <xwalk:field-source data-part="list:sort-integer" from="/*/mods:role[mods:roleTerm/text() = 'Editor']/mods:extension/ora:role_order" select-using="xpath" />
          <xwalk:field-source data-part="person:identifier" from="nameIdentifier">
            <xwalk:field-source data-part="identifier:scheme" from="@type" value-map="name-identifier" />
            <xwalk:field-source data-part="identifier:value" from="." />
          </xwalk:field-source>
          <xwalk:field-source data-part="person:address" from="/*/mods:affiliation/ora:affiliation" select-using="xpath">
            <xwalk:field-source data-part="address:organisation" from="/*/ora:affiliationComponent[@type='institution']" select-using="xpath" />
            <xwalk:field-source data-part="address:suborganisation" from="/*/ora:affiliationComponent[@type='department']" select-using="xpath" />
          </xwalk:field-source>
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="c-translator">
        <xwalk:field-source from="/mods:mods/mods:name[@type = 'personal' and mods:role/mods:roleTerm/text() = 'Translator']" select-using="xpath">
          <xwalk:field-source data-part="person:firstnames" from="/*/mods:namePart[@type = 'given']" select-using="xpath" />
          <xwalk:field-source data-part="person:lastname" from="/*/mods:namePart[@type = 'family']" select-using="xpath" />
          <!-- Workaround author ordering issue - GitHub issue 181 (https://github.com/tomwrobel/ora_data_model/issues/181), support ticket https://support.symplectic.co.uk/a/tickets/260733. -->
          <!-- Map the relevant role_order for this author to a data-part which is not used for output: person:id (this data-part only normally takes effect) during deposit xwalks. -->
          <!-- This value will be used in an overriden XSL template which will be added to the Custom\hyrax-XwalkIn.xsl file, which will apply a sort before rendering author-list fields. -->
          <xwalk:field-source data-part="list:sort-integer" from="/*/mods:role[mods:roleTerm/text() = 'Translator']/mods:extension/ora:role_order" select-using="xpath" />
          <xwalk:field-source data-part="person:identifier" from="nameIdentifier">
            <xwalk:field-source data-part="identifier:scheme" from="@type" value-map="name-identifier" />
            <xwalk:field-source data-part="identifier:value" from="." />
          </xwalk:field-source>
          <xwalk:field-source data-part="person:address" from="/*/mods:affiliation/ora:affiliation" select-using="xpath">
            <xwalk:field-source data-part="address:organisation" from="/*/ora:affiliationComponent[@type='institution']" select-using="xpath" />
            <xwalk:field-source data-part="address:suborganisation" from="/*/ora:affiliationComponent[@type='department']" select-using="xpath" />
          </xwalk:field-source>
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="associated-authors">
        <xwalk:field-source from="/mods:mods/mods:name[@type = 'personal' and mods:role/mods:roleTerm/text() = 'Contributor']" select-using="xpath">
          <xwalk:field-source data-part="person:firstnames" from="/*/mods:namePart[@type = 'given']" select-using="xpath" />
          <xwalk:field-source data-part="person:lastname" from="/*/mods:namePart[@type = 'family']" select-using="xpath" />
          <!-- Workaround author ordering issue - GitHub issue 181 (https://github.com/tomwrobel/ora_data_model/issues/181), support ticket https://support.symplectic.co.uk/a/tickets/260733. -->
          <!-- Map the relevant role_order for this author to a data-part which is not used for output: person:id (this data-part only normally takes effect) during deposit xwalks. -->
          <!-- This value will be used in an overriden XSL template which will be added to the Custom\hyrax-XwalkIn.xsl file, which will apply a sort before rendering author-list fields. -->
          <xwalk:field-source data-part="list:sort-integer" from="/*/mods:role[mods:roleTerm/text() = 'Contributor']/mods:extension/ora:role_order" select-using="xpath" />
          <xwalk:field-source data-part="person:identifier" from="nameIdentifier">
            <xwalk:field-source data-part="identifier:scheme" from="@type" value-map="name-identifier" />
            <xwalk:field-source data-part="identifier:value" from="." />
          </xwalk:field-source>
          <xwalk:field-source data-part="person:address" from="/*/mods:affiliation/ora:affiliation" select-using="xpath">
            <xwalk:field-source data-part="address:organisation" from="/*/ora:affiliationComponent[@type='institution']" select-using="xpath" />
            <xwalk:field-source data-part="address:suborganisation" from="/*/ora:affiliationComponent[@type='department']" select-using="xpath" />
          </xwalk:field-source>
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="author-url">
        <xwalk:field-source from="/*/mods:name[@type='personal']/mods:nameIdentifier[@type='website']" select-using="xpath" />
      </xwalk:field-mapping>
    </xwalk:field-map>
    <xwalk:field-map name="identifiers">
      <xwalk:field-mapping to="issn">
        <xwalk:field-source from="/*/mods:identifier[@type = 'issn']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="doi">
        <xwalk:field-source from="/*/mods:identifier[@type = 'doi']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="isbn-10">
        <xwalk:field-source from="/*/mods:identifier[@type = 'isbn']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="isbn-13">
        <xwalk:field-source from="/*/mods:identifier[@type = 'isbn13']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="pii">
        <xwalk:field-source from="/*/mods:identifier[@type = 'pii']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="eissn">
        <xwalk:field-source from="/*/mods:identifier[@type = 'eissn']" select-using="xpath" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="external-identifiers">
        <xwalk:field-source>
          <xwalk:field-source data-part="identifier:value" from="/*/mods:identifier[@type = 'pmid']" select-using="xpath" />
          <xwalk:field-source data-part="identifier:scheme" value="pubmed" />
        </xwalk:field-source>
        <xwalk:field-source>
          <xwalk:field-source data-part="identifier:value" from="/*/mods:identifier[@type = 'isidoc']" select-using="xpath" />
          <xwalk:field-source data-part="identifier:scheme" value="isidoc" />
        </xwalk:field-source>
        <xwalk:field-source>
          <xwalk:field-source data-part="identifier:value" from="/*/mods:identifier[@type = 'pmc']" select-using="xpath" />
          <xwalk:field-source data-part="identifier:scheme" value="pmc" />
        </xwalk:field-source>
        <xwalk:field-source>
          <xwalk:field-source data-part="identifier:value" from="/*/mods:identifier[@type = 'nihms']" select-using="xpath" />
          <xwalk:field-source data-part="identifier:scheme" value="nihms" />
        </xwalk:field-source>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="patent-number">
        <xwalk:field-source from="/mods:mods/mods:extension/ora_patent:patent/ora_patent:number" select-using="xpath" />
      </xwalk:field-mapping>
    </xwalk:field-map>
    <xwalk:field-map name="journal-markup">
      <xwalk:field-mapping to="pagination">
        <xwalk:field-source format="pagination:start-end" from="/*/mods:relatedItem[@type = 'host']/mods:part/mods:extent[@unit = 'pages']/mods:list" select-using="xpath" value-map="dash-hyphen" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="volume">
        <xwalk:field-source from="/*/mods:relatedItem[@type = 'host']/mods:part/mods:detail[@type = 'volume']/mods:number" select-using="xpath" />
      </xwalk:field-mapping>
      <!--
      <xwalk:field-mapping to="journal">
        <xwalk:field-source from="/*/mods:relatedItem[@type='host']/mods:titleInfo/mods:title" select-using="xpath" />
      </xwalk:field-mapping>
 -->
      <!-- added 18 Dec-->
      <xwalk:field-mapping to="journal">
        <xwalk:if>
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Working paper</xwalk:condition>
          <xwalk:result>
            <xwalk:field-source from="/mods:mods/mods:relatedItem[@type = 'series']/mods:titleInfo/mods:title" select-using="xpath" />
          </xwalk:result>
          <xwalk:else>
            <xwalk:result>
              <xwalk:field-source from="/*/mods:relatedItem[@type='host']/mods:titleInfo/mods:title" select-using="xpath" />
            </xwalk:result>
          </xwalk:else>
        </xwalk:if>
      </xwalk:field-mapping>
      <xwalk:field-mapping to="issue">
        <xwalk:field-source from="/*/mods:relatedItem[@type = 'host']/mods:part/mods:detail[@type = 'issue']/mods:number" select-using="xpath" />
      </xwalk:field-mapping>
    </xwalk:field-map>
    <xwalk:field-map name="access-conditions">
      <xwalk:field-mapping to="publisher-licence">
        <xwalk:field-source from="/mods:mods/mods:accessCondition[@type='license']" select-using="xpath" value-map="licences" />
      </xwalk:field-mapping>
      <xwalk:field-mapping to="author-licence">
        <!-- TODO: We might want to value-map this URL-style identifier to a nicer display name -->
        <xwalk:field-source from="/mods:mods/mods:accessCondition[@type='record_ora_deposit_licence']" select-using="xpath" value-map="licences" />
      </xwalk:field-mapping>
    </xwalk:field-map>
  </xwalk:field-maps>
  <xwalk:value-maps>
    <xwalk:value-map name="name-identifier">
      <xwalk:value-mapping from="orcid_identifier" to="orcid" />
      <xwalk:value-mapping from="email_address" to="email-address" />
      <xwalk:value-mapping action="ignore-this-value" from="contributor_record_identifier" />
      <xwalk:value-mapping action="ignore-this-value" from="institutional_identifier" />
      <xwalk:value-mapping action="ignore-this-value" from="figshare-for-institutions-user-id" />
    </xwalk:value-map>
    <!--<xwalk:value-map name="repository-status"><xwalk:value-mapping from="Deposited" to="Private"/><xwalk:value-mapping from="In review" to="Private (in review)"/><xwalk:value-mapping from="Public" to="Public"/><xwalk:otherwise-mapping to="Unknown"/></xwalk:value-map>-->
    <xwalk:value-map name="publication-status">
      <xwalk:value-mapping from="Not published" to="Unpublished" />
      <xwalk:value-mapping from="Submitted" to="Submitted" />
      <xwalk:value-mapping from="Accepted" to="Accepted" />
      <xwalk:value-mapping from="In press" to="Accepted" />
      <xwalk:value-mapping from="Published" to="Published" />
      <xwalk:value-mapping from="Under review" to="Submitted" />
      <xwalk:otherwise-mapping action="ignore-this-value" />
    </xwalk:value-map>
    <xwalk:value-map name="types">
      <xwalk:value-mapping from="Editorial" to="Editorial Comment" />
      <xwalk:value-mapping from="Review" to="Review" />
      <xwalk:value-mapping from="Correspondence" to="Rapid communication" />
      <xwalk:value-mapping from="Addendum" to="Addendum" />
      <xwalk:value-mapping from="Corrigendum" to="Corrigendum" />
      <xwalk:value-mapping from="Letter" to="Letter" />
      <xwalk:value-mapping from="Erratum" to="Erratum" />
      <xwalk:value-mapping from="Abstract" to="Abstract" />
      <xwalk:value-mapping from="Comment" to="Comment" />
      <xwalk:value-mapping from="Case note" to="Case note" />
      <xwalk:otherwise-mapping action="ignore-this-value" />
    </xwalk:value-map>
    <xwalk:value-map name="licences">
      <xwalk:value-mapping from="CC Attribution (CC BY)" to="CC BY" />
      <xwalk:value-mapping from="CC Attribution-NoDerivatives (CC BY-ND)" to="CC BY-ND" />
      <xwalk:value-mapping from="CC Attribution-ShareAlike (CC BY-SA)" to="CC BY-SA" />
      <xwalk:value-mapping from="CC Attribution-NonCommercial (CC BY-NC)" to="CC BY-NC" />
      <xwalk:value-mapping from="CC Attribution-NonCommercial-NoDerivatives (CC BY-NC-ND)" to="CC BY-NC-ND" />
      <xwalk:value-mapping from="CC Attribution-NonCommercial-ShareAlike (CC BY-NC-SA)" to="CC BY-NC-SA" />
      <xwalk:otherwise-mapping action="ignore-this-value" />
    </xwalk:value-map>
    <xwalk:value-map name="apc">
      <xwalk:value-mapping from="yes" to="Yes" />
      <xwalk:value-mapping from="no" to="No" />
      <xwalk:otherwise-mapping action="ignore-this-value" />
    </xwalk:value-map>
    <xwalk:value-map name="dash-hyphen" matchMode="anyPosition">
      <xwalk:value-mapping from="â€“" to="-" />
      <!--From U+2013 : EN DASH -> U+002D : HYPHEN-MINUS -->
    </xwalk:value-map>
  </xwalk:value-maps>
  <xwalkin:object-type-selector>
    <xwalk:choose>
      <!-- ORA OUTPUT TYPES WHERE ANY SUBTYPES DO NOT FEATURE IN MAPPING TO SE-->
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Journal article</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="journal-article" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Patent</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="patent" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Internet publication</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="internet-publication" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Composition</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="composition" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Working paper</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-report" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Report</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="report" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Thesis</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="thesis-dissertation" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Ephemera</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-ephemera" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA BOOK AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Edited book</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-book" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Scholarly edition</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="scholarly-edition" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Translation</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-translation" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="book" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA BOOK SECTION AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Book section</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Chapter</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="chapter" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA CONFERENCE ITEM AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Exhibition</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="exhibition" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Poster</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="poster" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Presentation</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="presentation" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Conference item</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="conference" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA DATASET AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Software</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="software" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Design</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="design" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Media</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="media" />
        </xwalk:result>
      </xwalk:when>
      <!-- symplectic_to_ora_field_mapping-2.1 gives Dataset/Media to both figure and media. Suggest it only goes to  Media (as above).
      <xwalk:when><xwalk:condition operator="and"><xwalk:condition operator="equals" argument-field="/*/mods:genre[@type='type_of_work']" select-using="xpath">Dataset</xwalk:condition><xwalk:condition operator="equals" argument-field="/*/mods:genre[@type='sub_type_of_work']" select-using="xpath">Media</xwalk:condition></xwalk:condition><xwalk:result><xwalkin:object-type-selection object-type="figure" category="publication" field-map="default-map" /></xwalk:result></xwalk:when>-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Fileset</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="fileset" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Dataset</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="dataset" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA PHYSICAL OBJECT AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Artefact</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="artefact" />
        </xwalk:result>
      </xwalk:when>
      <!--Rather than a nested conditional I have written Device and Product separately to help readability-->
      <!--<xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Device</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-device-product"/>
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Product</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-device-product"/>
        </xwalk:result>
      </xwalk:when>-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Device/Product</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-device-product" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Physical object</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-device-product" />
        </xwalk:result>
      </xwalk:when>
      <!-- ORA COMPOSITION AND SUBTYPES-->
      <xwalk:when>
        <xwalk:condition operator="and">
          <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Composition</xwalk:condition>
          <xwalk:condition argument-field="/*/mods:genre[@type='sub_type_of_work']" operator="equals" select-using="xpath">Performance</xwalk:condition>
        </xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="performance" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Composition</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="composition" />
        </xwalk:result>
      </xwalk:when>
      <xwalk:when>
        <xwalk:condition argument-field="/*/mods:genre[@type='type_of_work']" operator="equals" select-using="xpath">Universal Test Object</xwalk:condition>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="c-journal-article-cloned" />
        </xwalk:result>
      </xwalk:when>
      <!-- END OF ORA PERFORMANCE AND SUBTYPES-->
      <xwalk:otherwise>
        <xwalk:result>
          <xwalkin:object-type-selection category="publication" field-map="default-map" object-type="other" />
        </xwalk:result>
      </xwalk:otherwise>
    </xwalk:choose>
  </xwalkin:object-type-selector>
</xwalkin:consolidated-maps>
